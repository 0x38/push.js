"use strict";function isFunction(n){return n&&"[object Function]"==={}.toString.call(n)}function runFunctionString(n){if(n.trim().length>0){var i=new Function(n);isFunction(i)&&i()}}self.addEventListener("message",function(n){self.client=n.source}),self.onnotificationclose=function(n){runFunctionString(n.notification.data.onClose),self.client.postMessage(JSON.stringify({id:n.notification.data.id,action:"close"}))},self.onnotificationclick=function(n){var i,o,t;console.log(n.notification),void 0!==n.notification.data.link&&null!==n.notification.data.link&&(o=n.notification.data.origin,i=n.notification.data.link,t=o.substring(0,o.indexOf("/",8))+"/",n.notification.close(),console.log("called"),n.waitUntil(clients.matchAll({type:"window"}).then(function(n){for(var o,c,e=0;e<n.length;e++)if(o=n[e],c=t+i,console.log(c),"/"!==c[c.length-1]&&"/"===o.url[o.url.length-1]&&(c+="/"),console.log(c),console.log(o.url),o.url===c&&"focus"in o)return o.focus();if(clients.openWindow)return clients.openWindow("/"+i)}).catch(function(n){throw new Error("A ServiceWorker error occurred: "+n.message)}))),runFunctionString(n.notification.data.onClick)};